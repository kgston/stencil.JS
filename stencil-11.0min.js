var stencil={stencilHolder:{},define:function(a,b,c,d){var g=function(a,b,c){return{guid:stencil.util.guid(),tagID:a,template:c,childStencils:{},isStandard:!0,destination:b,existingContent:"",clear:function(){$(this.destination).empty().append(this.existingContent)},render:function(a,b,c){if(!Array.isArray(a))if(stencil.util.isObject(a))a=[a];else return stencil.util.log("Stencil - "+this.tagID+": dataset in an invalid format, detected: "+typeof a),!1;else if(null==a||0===a.length)return stencil.util.log("Stencil: no dataset passed in"),
!1;var d=this.destination,e=!1,f;if(null==c){if("none"===d)if("none"===b||"string"===b||"fragment"===b)f=$(document.createElement("div"));else return stencil.util.log('Stencil: Only render output type "none", "fragment" or "string" is supported for stencils with no destination'),!1;else c=$(d),f=c.filter(":first").clone();e=!0}else f=c.find(d.replace(/\\/g,"\\\\\\"));var g=this.template,h=this.childStencils,l=this.isStandard;if(f.length)"append"===b||"prepend"===b?this.existingContent=f.html():"none"===
b&&c.empty(),f.empty();else return stencil.util.log("Stencil: Destination ID - "+d+" not found!"),!1;a.forEach(function(a,b){a.lpIdx=b;a.ctIdx=b+1;for(var c=g;0<=c.search(/\{\{[\w.]*\}\}/);)var d=c.match(/\{\{[\w.]*\}\}/)[0],d=d.substring(2,d.length-2),e=stencil.util.getKeyValue(a,d),e=null==e?"":e,c=c.replace("{{"+d+"}}",e);var k=f;l&&(d=stencil.util.createWrapper(f,"stencil-replicator","append"),k=f.find(d));k.append(c);Object.keys(h).forEach(function(b){var c=a[b];null!=a.global&&(Array.isArray(c)?
c.forEach(function(b){b.global=a.global}):stencil.util.isObject(c)&&(c.global=a.global));h[b].render(c,null,k)});k.find("select[data-stencilselector]").each(function(){var b=this.getAttribute("data-stencilselector");stencil.util.selectOption($(this),stencil.util.getKeyValue(a,b))})});"prepend"===b&&f.append(this.existingContent);if(e){stencil.opts.debug||stencil.util.cleanUpStencils(f);if("none"===b||"fragment"===b)return f.children();if("string"===b)return f.html();"append"!==b&&c.empty();c.append(f.children());
return!0}}}},h=function(a){var b=g(a.tagID,a.destination,a.template);Object.keys(a.childStencils).forEach(function(c){b.childStencils[c]=h(a.childStencils[c])});return b},e=$("#"+a);if(null!=stencil.stencilHolder[a])return a=stencil.stencilHolder[a],e=h(a),null==b&&(b=stencil.util.createWrapper($(a.destination),null==d?stencil.opts.defaultOutputElement:d,"after")),e.destination=b,e;if(!e.length)return stencil.util.log("Stencil: Tag ID '"+a+"' provided is not found!"),null;var k={};stencil.util.log("Stencil: Searching for child stencils in "+
a);0!==e.find("stencil").length&&(k=stencil.util.findStencils(e));stencil.util.log("Stencil: Completed child stencil generation for "+a+", "+Object.keys(k).length+" child stencil");null!=c&&c.forEach(function(a){stencil.util.log("Stencil: Building specified child stencil: "+a);var b=$("#"+a);b.length||stencil.util.log("Stencil: Specified child stencil: "+a+" not found!");b.addClass(a);k[a]=g(a,"."+a,b.html());k[a].isStandard=!1;b.empty()});null==b&&(b=stencil.util.createWrapper(e,null==d?stencil.opts.defaultOutputElement:
d,"after"));b=g(a,b,e.html());b.childStencils=k;e.remove();return stencil.stencilHolder[a]=b},build:function(a){a=null==a?$("body"):$("#"+a);return 0===a.length?(stencil.util.log("Stencil: Unable to start build process as starting element ID cannot be found"),null):stencil.util.findStencils(a)},util:{guid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),selectOption:function(a,
b){a.children().each(function(){if(this.value==b)return this.setAttribute("selected",""),!1})},outerHTML:function(a){return a.clone().wrap("<p>").parent().html()},createWrapper:function(a,b,c){var d=stencil.util.guid(),g=document.createElement(b);g.className=""===g.className?d:g.className+" "+d;a[c](g);return b+"."+d},findStencils:function(a){function b(a,c){for(var h=a.childNodes,e=0;e<h.length;e++)"STENCIL"!==h[e].nodeName?b(h[e],c):c[h[e].id]=stencil.define(h[e].id,null,null,"stencil-output")}
var c={};b(a.get(0),c);return c},cleanUpStencils:function(a){function b(a){if(-1<a.nodeName.indexOf("STENCIL"))0===a.childNodes.length&&a.parentNode.removeChild(a),$(a).children().unwrap().each(function(){b(this)});else{a=a.childNodes;for(var d=0;d<a.length;d++)b(a[d])}}a.children().each(function(){b(this)})},changeTag:function(a,b){a.each(function(a){var d=this.outerHTML.replace("/^<"+this.nodeName+"/","<"+b).replace("/</"+this.nodeName+">$/","</"+b+">");a.replaceWith(d)})},getKeyValue:function(a,
b){var c;b.split(".").every(function(d,g){c=0===g?null==a[d]?stencil.util.log("Stencil: "+d+" of "+b+" not found"):a[d]:null==c[d]?stencil.util.log("Stencil: "+d+" of "+b+" not found"):c[d];return null!=c?!0:!1});return c},isObject:function(a){return a===Object(a)},log:function(a){stencil.opts.debug&&console.log(a)}},opts:{debug:!1,defaultOutputElement:"stencil-output"}};