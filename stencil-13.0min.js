var stencil={stencilHolder:{},define:function(a,e,c,b){var f=function(a,b,c){return{guid:stencil.util.guid(),tagID:a,template:c,childStencils:{},isStandard:!0,destination:b,existingContent:"",clear:function(){$(this.destination).empty().append(this.existingContent)},render:function(a,b,c){if(!Array.isArray(a))if(stencil.util.isObject(a))a=[a];else return stencil.util.log("Stencil - "+this.tagID+": dataset in an invalid format, detected: "+typeof a),!1;else if(null==a||0===a.length)return stencil.util.log("Stencil: no dataset passed in"),
!1;var e=this.destination,f=!1,d;if(null==c){if("none"===e)if("none"===b||"string"===b||"fragment"===b)d=$(document.createElement("div"));else return stencil.util.log('Stencil: Only render output type "none", "fragment" or "string" is supported for stencils with no destination'),!1;else c=$(e),d=c.filter(":first").clone();f=!0}else d=c.find(e.replace(/\\/g,"\\\\\\"));var m=this.template,g=this.childStencils,l=this.isStandard;if(d.length)"append"===b||"prepend"===b?this.existingContent=d.html():"none"===
b&&c.empty(),d.empty();else return stencil.util.log("Stencil: Destination ID - "+e+" not found!"),!1;a.forEach(function(a,b){a.lpIdx=b;a.ctIdx=b+1;for(var c=m;0<=c.search(/\{\{[\w.]*\}\}/);)var f=c.match(/\{\{[\w.]*\}\}/)[0],f=f.substring(2,f.length-2),k=stencil.util.getKeyValue(a,f),k=null==k?"":k,c=c.replace("{{"+f+"}}",k);var h=d;l&&(f=stencil.util.createWrapper(d,"stencil-replicator","append"),h=d.find(f));h.append(c);l||h.removeClass(e.replace(".",""));Object.keys(g).forEach(function(b){var c=
a[b];null!=a.global&&(Array.isArray(c)?c.forEach(function(b){b.global=a.global}):stencil.util.isObject(c)&&(c.global=a.global));g[b].render(c,null,h)});h.find("select[data-stencilselector]").each(function(){var b=this.getAttribute("data-stencilselector");stencil.util.selectOption($(this),stencil.util.getKeyValue(a,b))})});"prepend"===b&&d.append(this.existingContent);if(f){stencil.util.cleanUpStencils(d);if("none"===b||"fragment"===b)return d.children();if("string"===b)return d.html();"append"!==
b&&c.empty();c.append(d.children());return!0}}}},g=function(a){var b=f(a.tagID,a.destination,a.template);Object.keys(a.childStencils).forEach(function(c){b.childStencils[c]=g(a.childStencils[c])});return b},d=$("#"+stencil.util.escapeCSS(a));if(null!=stencil.stencilHolder[a])return a=stencil.stencilHolder[a],d=g(a),null==e&&(e=stencil.util.createWrapper($(a.destination),null==b?stencil.opts.defaultOutputElement:b,"after")),d.destination=e,d;if(!d.length)return stencil.util.log("Stencil: Tag ID '"+
a+"' provided is not found!"),null;null!=d.attr("data-childStencil")&&""!=d.attr("data-childStencil")&&(null==c&&(c=[]),d.attr("data-childStencil").split(" ").forEach(function(a){""!=a&&c.push(a)}));var h={};stencil.util.log("Stencil: Searching for child stencils in "+a);0!==d.find("stencil").length&&(h=stencil.util.findStencils(d));stencil.util.log("Stencil: Completed child stencil generation for "+a+", "+Object.keys(h).length+" child stencil");null!=c&&c.every(function(a){stencil.util.log("Stencil: Building specified child stencil: "+
a);var b=$("#"+stencil.util.escapeCSS(a));if(!b.length)return stencil.util.log("Stencil: Specified child stencil: "+a+" not found!"),!1;var c=stencil.util.guid();b.addClass(c);h[a]=f(a,"."+c,b.html());h[a].isStandard=!1;b.empty();return!0});null==e&&(e=stencil.util.createWrapper(d,null==b?stencil.opts.defaultOutputElement:b,"after"));e=f(a,e,d.html());e.childStencils=h;d.remove();return stencil.stencilHolder[a]=e},build:function(a){a=null==a?$("body"):$("#"+a);return 0===a.length?(stencil.util.log("Stencil: Unable to start build process as starting element ID cannot be found"),
null):stencil.util.findStencils(a)},util:{guid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),selectOption:function(a,e){a.children().each(function(){if(this.value==e)return this.setAttribute("selected",""),!1})},outerHTML:function(a){return a.clone().wrap("<p>").parent().html()},createWrapper:function(a,e,c){var b=stencil.util.guid(),f=document.createElement(e);f.className=""===
f.className?b:f.className+" "+b;a[c](f);return e+"."+b},findStencils:function(a){function e(a,c){for(var g=a.childNodes,d=0;d<g.length;d++)"STENCIL"!==g[d].nodeName?e(g[d],c):c[g[d].id]=stencil.define(g[d].id,null,null,"stencil-output")}var c={};e(a.get(0),c);return c},cleanUpStencils:function(a){function e(a){if(-1<a.nodeName.indexOf("STENCIL"))0===a.childNodes.length&&a.parentNode.removeChild(a),$(a).children().unwrap().each(function(){e(this)});else{a=a.childNodes;for(var b=0;b<a.length;b++)e(a[b])}}
a.children().each(function(){e(this)})},escapeCSS:function(a){a=String(a);for(var e=a.length,c=-1,b,f="",g=a.charCodeAt(0);++c<e;){b=a.charCodeAt(c);if(0==b)throw new InvalidCharacterError("Invalid character: the input contains U+0000.");f=1<=b&&31>=b||127==b||0==c&&48<=b&&57>=b||1==c&&48<=b&&57>=b&&45==g?f+("\\"+b.toString(16)+" "):128<=b||45==b||95==b||48<=b&&57>=b||65<=b&&90>=b||97<=b&&122>=b?f+a.charAt(c):f+("\\"+a.charAt(c))}return f},getKeyValue:function(a,e){var c;e.split(/[\.\[\]]/).every(function(b,
f){if(""===b)return!0;c=0===f?null==a[b]?stencil.util.log("Stencil: "+b+" of "+e+" not found"):a[b]:null==c[b]?stencil.util.log("Stencil: "+b+" of "+e+" not found"):c[b];return null!=c?!0:!1});return c},isObject:function(a){return a===Object(a)},log:function(a){stencil.opts.debug&&console.log(a)}},opts:{debug:!1,defaultOutputElement:"stencil-output"}};