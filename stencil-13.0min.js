var stencil={stencilHolder:{},define:function(a,d,c,b){var f=function(a,b,c){return{guid:stencil.util.guid(),tagID:a,template:c,childStencils:{},isStandard:!0,destination:b,existingContent:"",clear:function(){$(this.destination).empty().append(this.existingContent)},render:function(a,b,c){if(!Array.isArray(a))if(stencil.util.isObject(a))a=[a];else return stencil.util.log("Stencil - "+this.tagID+": dataset in an invalid format, detected: "+typeof a),!1;else if(null==a||0===a.length)return stencil.util.log("Stencil: no dataset passed in"),
!1;var d=this.destination,f=!1,e;if(null==c){if("none"===d)if("none"===b||"string"===b||"fragment"===b)e=$(document.createElement("div"));else return stencil.util.log('Stencil: Only render output type "none", "fragment" or "string" is supported for stencils with no destination'),!1;else c=$(d),e=c.filter(":first").clone();f=!0}else e=c.find(d.replace(/\\/g,"\\\\\\"));var k=this.template,g=this.childStencils,l=this.isStandard;if(e.length)"append"===b||"prepend"===b?this.existingContent=e.html():"none"===
b&&c.empty(),e.empty();else return stencil.util.log("Stencil: Destination ID - "+d+" not found!"),!1;a.forEach(function(a,b){a.lpIdx=b;a.ctIdx=b+1;for(var c=k;0<=c.search(/\{\{[\w.]*\}\}/);)var d=c.match(/\{\{[\w.]*\}\}/)[0],d=d.substring(2,d.length-2),f=stencil.util.getKeyValue(a,d),f=null==f?"":f,c=c.replace("{{"+d+"}}",f);var h=e;l&&(d=stencil.util.createWrapper(e,"stencil-replicator","append"),h=e.find(d));h.append(c);Object.keys(g).forEach(function(b){var c=a[b];null!=a.global&&(Array.isArray(c)?
c.forEach(function(b){b.global=a.global}):stencil.util.isObject(c)&&(c.global=a.global));g[b].render(c,null,h)});h.find("select[data-stencilselector]").each(function(){var b=this.getAttribute("data-stencilselector");stencil.util.selectOption($(this),stencil.util.getKeyValue(a,b))})});"prepend"===b&&e.append(this.existingContent);if(f){stencil.opts.debug||stencil.util.cleanUpStencils(e);if("none"===b||"fragment"===b)return e.children();if("string"===b)return e.html();"append"!==b&&c.empty();c.append(e.children());
return!0}}}},g=function(a){var b=f(a.tagID,a.destination,a.template);Object.keys(a.childStencils).forEach(function(c){b.childStencils[c]=g(a.childStencils[c])});return b},e=$("#"+stencil.util.escapeCSS(a));if(null!=stencil.stencilHolder[a])return a=stencil.stencilHolder[a],e=g(a),null==d&&(d=stencil.util.createWrapper($(a.destination),null==b?stencil.opts.defaultOutputElement:b,"after")),e.destination=d,e;if(!e.length)return stencil.util.log("Stencil: Tag ID '"+a+"' provided is not found!"),null;
null!=e.attr("data-childStencil")&&""!=e.attr("data-childStencil")&&(null==c&&(c=[]),e.attr("data-childStencil").split(" ").forEach(function(a){""!=a&&c.push(a)}));var h={};stencil.util.log("Stencil: Searching for child stencils in "+a);0!==e.find("stencil").length&&(h=stencil.util.findStencils(e));stencil.util.log("Stencil: Completed child stencil generation for "+a+", "+Object.keys(h).length+" child stencil");null!=c&&c.forEach(function(a){stencil.util.log("Stencil: Building specified child stencil: "+
a);var b=$("#"+stencil.util.escapeCSS(a));b.length||stencil.util.log("Stencil: Specified child stencil: "+a+" not found!");b.addClass(a);var c="."+stencil.util.escapeCSS(a);h[a]=f(a,c,b.html());h[a].isStandard=!1;b.empty()});null==d&&(d=stencil.util.createWrapper(e,null==b?stencil.opts.defaultOutputElement:b,"after"));d=f(a,d,e.html());d.childStencils=h;e.remove();return stencil.stencilHolder[a]=d},build:function(a){a=null==a?$("body"):$("#"+a);return 0===a.length?(stencil.util.log("Stencil: Unable to start build process as starting element ID cannot be found"),
null):stencil.util.findStencils(a)},util:{guid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),selectOption:function(a,d){a.children().each(function(){if(this.value==d)return this.setAttribute("selected",""),!1})},outerHTML:function(a){return a.clone().wrap("<p>").parent().html()},createWrapper:function(a,d,c){var b=stencil.util.guid(),f=document.createElement(d);f.className=""===
f.className?b:f.className+" "+b;a[c](f);return d+"."+b},findStencils:function(a){function d(a,c){for(var g=a.childNodes,e=0;e<g.length;e++)"STENCIL"!==g[e].nodeName?d(g[e],c):c[g[e].id]=stencil.define(g[e].id,null,null,"stencil-output")}var c={};d(a.get(0),c);return c},cleanUpStencils:function(a){function d(a){if(-1<a.nodeName.indexOf("STENCIL"))0===a.childNodes.length&&a.parentNode.removeChild(a),$(a).children().unwrap().each(function(){d(this)});else{a=a.childNodes;for(var b=0;b<a.length;b++)d(a[b])}}
a.children().each(function(){d(this)})},escapeCSS:function(a){a=String(a);for(var d=a.length,c=-1,b,f="",g=a.charCodeAt(0);++c<d;){b=a.charCodeAt(c);if(0==b)throw new InvalidCharacterError("Invalid character: the input contains U+0000.");f=1<=b&&31>=b||127==b||0==c&&48<=b&&57>=b||1==c&&48<=b&&57>=b&&45==g?f+("\\"+b.toString(16)+" "):128<=b||45==b||95==b||48<=b&&57>=b||65<=b&&90>=b||97<=b&&122>=b?f+a.charAt(c):f+("\\"+a.charAt(c))}return f},getKeyValue:function(a,d){var c;d.split(/[\.\[\]]/).every(function(b,
f){if(""===b)return!0;c=0===f?null==a[b]?stencil.util.log("Stencil: "+b+" of "+d+" not found"):a[b]:null==c[b]?stencil.util.log("Stencil: "+b+" of "+d+" not found"):c[b];return null!=c?!0:!1});return c},isObject:function(a){return a===Object(a)},log:function(a){stencil.opts.debug&&console.log(a)}},opts:{debug:!1,defaultOutputElement:"stencil-output"}};